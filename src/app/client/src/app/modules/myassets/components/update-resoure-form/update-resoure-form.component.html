<div class="ui grid">
  <div *ngFor="let field of formFieldProperties;let i = index"
    class="twelve wide column">
    <hr *ngIf="i===3">
    <hr *ngIf="i===4">
    <hr *ngIf="i===5">

    <div *ngIf="field.inputType==='text' && field.code!='creators' && field.code!='region' && field.code!='link'"
      class="required field" [ngClass]="{ 'disabled':!field.editable}">

      <div class="field required">
        <label>
          {{field.name}}
        </label>
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData[field.code]" id="style"
          placeholder={{field.placeholder}}>

      </div>
    </div>
    <div *ngIf="field.inputType==='text' && field.code==='link' && formInputData['source']" class="required field"
      [ngClass]="{ 'disabled':!field.editable}">

      <div class="field required">
        <label>
          {{field.name}}
        </label>
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData['source']" id="style"
          placeholder={{field.placeholder}}>

      </div>
    </div>
    
    <div *ngIf="field.inputType==='text' && field.code==='creators'" class="field"
      [ngClass]="{ 'disabled':!field.editable,'required' : !enableLink}">

      <div [ngClass]="{'required': !enableLink}" class="field">
        <label>
          {{field.name}}
        </label>
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData[field.code]" id="style"
          placeholder={{field.placeholder}}>

      </div>
    </div>
    <!-- <div *ngIf="field.inputType==='text' && field.code==='region'" class="required field"
      [ngClass]="{ 'disabled':!field.editable}">
      <div class="field">
        <label>
          {{field.name}}
        </label>
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData[field.code]" id="style"
          placeholder={{field.placeholder}}>
      </div>
    </div> -->
    <div *ngIf="field.code!='year' && field.code==='region'" class="field required"
    [ngClass]="{ 'disabled':!field.editable}">
    <!-- <label>{{field.name}}</label> -->
    <div class="required field">
      <label>
        {{field.name}}

      </label>
      <sui-select id={{field.code}} name={{field.code}} class="selection" [(ngModel)]="formInputData['region']"
        (ngModelChange)="updateForm({index:i, field:field, value:formInputData['region']})"
        [placeholder]="formInputData['region']" [isSearchable]=true #searchSelect placeholder="Choose">
        <sui-select-option *ngFor="let option of countryList" [value]="option"></sui-select-option>
      </sui-select>
        <!-- <hr>
        <select id={{field.code}} name={{field.code}} class="ui selection dropdown" [value]="formInputData[field.code]"
          [(ngModel)]="formInputData[field.code]" (ngModelChange)="updateForm({index:i, field:field, value:formInputData[field.code]})" placeholder="select">
          <option *ngFor="let option of countryList" [value]="option">{{option}}</option>
        </select>
<hr>
        <select class="ui search dropdown">
            <option *ngFor="let option of countryList" [value]="option">{{option}}</option></select> -->
      </div>
    </div>
    <div *ngIf="field.inputType==='number'" class="field" [ngClass]="{ 'disabled':!field.editable , 'required' : !enableLink}">
      <label>
        {{field.name}}
      </label>
      <div class="field">
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData[field.code]"
          placeholder={{field.placeholder}} id="style">
      </div>
    </div>
    <div *ngIf="field.inputType==='textarea'" class="field" [ngClass]="{ 'disabled':!field.editable}">
      <label>
        {{field.name}}
      </label>
      <div class="field">
        <input name={{field.code}} type={{field.inputType}} [(ngModel)]="formInputData[field.code]"
          placeholder={{field.placeholder}} id="style">
      </div>
    </div>

    <div *ngIf="field.inputType==='keywordsuggestion'" class="field required" [ngClass]="{ 'disabled':!field.editable}">
      <label>
        {{field.name}}
      </label>
      <div class="field">

        <select name="{{field.code}}" id={{field.code}} multiple="" class="ui search fluid dropdown multiple"
          [(ngModel)]="formInputData[field.code]"
          (ngModelChange)="updateForm({index:i, field:field, value:formInputData[field.code]})">
          <option *ngFor="let option of keywords" selected="selected">{{option}}</option>

        </select>

      </div>
    </div>


    <div *ngIf="field.inputType==='select' && field.code!='year' && field.code!='region'" class="field"
      [ngClass]="{ 'disabled':!field.editable, 'required': !enableLink}">
      <!-- <label>{{field.name}}</label> -->
      <div class="field" [ngClass]="{'required':!enableLink}">
        <label>
          {{field.name}}
        </label>
        <sui-select id={{field.code}} name={{field.code}} class="selection" [(ngModel)]="formInputData[field.code]"
          (ngModelChange)="updateForm({index:i, field:field, value:formInputData[field.code]})">
          <sui-select-option *ngFor="let option of categoryList[field.code]" [value]="option.name"></sui-select-option>
        </sui-select>
      </div>
    </div>
    <div *ngIf="field.inputType==='multiSelect'" class="field " [ngClass]="{ 'disabled':!field.editable, 'required': !enableLink}">
        <label>{{field.name}}</label>
        <div class=" field">
          <sui-multi-select id={{field.code}} name={{field.code}} class="selection"
            [(ngModel)]="formInputData[field.code]"
            (ngModelChange)="updateForm({index:i, field:field, value:formInputData[field.code]})" #multiSelect>
            <sui-select-option *ngFor="let option of categoryList[field.code]" [value]="option"> </sui-select-option>
          </sui-multi-select>
        </div>
      </div>
    <div *ngIf="field.code==='year' && field.code!='region'" class="field" [ngClass]="{ 'disabled':!field.editable}">
      <label>{{field.name}}</label>
      <div class="field">
        <sui-select id={{field.code}} name={{field.code}} class="selection" [(ngModel)]="formInputData[field.code]">
          <sui-select-option *ngFor="let option of years" [value]="option"> </sui-select-option>
        </sui-select>
      </div>
    </div>
    <div *ngIf="field.code==='gradeLevel'" class="field" [ngClass]="{ 'disabled':!field.editable}">
      <label>{{field.name}}</label>
      <form class="conceptSelector ui form">

        <app-concept-picker [selectedConcepts]="formInputData[field.code]"
          [categoryName]="field.name" [category]="categoryList[field.code]"
          [conceptPickerClass]="'content-creation-concept-picker'" (Concepts)="concepts($event)"></app-concept-picker>
      </form>
    </div>

    <div *ngIf="field.code==='topic'" class="field" [ngClass]="{ 'disabled':!field.editable}">
      <label>{{field.name}}</label>
      <form class="concept ui form">

        <app-framwork-selector *ngIf="showFramework" [selectedConcept]="formInputData[field.code]"
          [categoryName]="field.name" [category]="categoryList[field.code]"
          [conceptPicker]="'content-creation-concept-picker'" (Framework)="conceptspFramework($event)">
        </app-framwork-selector>
        <app-framwork-selector *ngIf="!showFramework" [selectedConcept]="formInputData[field.code]"
          [categoryName]="field.name" [category]="categoryList[field.code]"
          [conceptPicker]="'content-creation-concept-picker'" (Framework)="conceptspFramework($event)">
        </app-framwork-selector>
      </form>
    </div>
    <div class="licensedropdowns">
        <div *ngIf="i === 5" class="field type1" [ngClass]= "{'required': !enableLink}">
          
            <label>Asset Format</label>
            <div class="field">
                  <sui-select [(ngModel)]="assetformat" class="selection" [placeholder]="'Select'" (ngModelChange)=resetattribute()>
                       <sui-select-option *ngFor="let assetformat of allassetformat" [value]="assetformat"></sui-select-option>
                  </sui-select>
                </div>
        </div>
        <div *ngIf="i === 5" class="field type2" [ngClass]= "{'required': !enableLink}">
                <label>License Type</label>
                <button style="background-color: transparent;border:transparent" (click)='showall()'><i class="fas fa-info-circle"></i></button>
                <div class="field">
                  <sui-select [(ngModel)]="licensetype"  class="selection" [placeholder]="'Select'" id="licensetypefield">
                    <sui-select-option *ngFor="let licensetype of alllicensetype" [value]="licensetype"></sui-select-option>
                  </sui-select>
                </div>
         </div>
        </div>
  </div>
</div>

<ng-template let-context let-modal="modal" #modalTemplate>
   
    <div style="overflow-x: scroll;" *ngIf="assetformat === 'Content'">
        <table class="ui celled table">
            <thead >
                <tr>
                <th *ngFor="let data of contentlicenses">{{data.label}}</th>
                
              </tr></thead>
            <tbody>
              <tr *ngFor="let data of contentlicenses;let i=index">
                  <td *ngFor="let content of newcontentlicenseobject[i]; let j=last">
                      <span *ngIf="!j">{{content}}</span>
                      <span *ngIf="j"><a href="{{content}}" target="_blank">{{content}}</a></span> 
                  </td>
              </tr>
            </tbody>
          </table>
    </div>
    <div style="overflow-x: scroll;" *ngIf="assetformat === 'Software Code'">
        <table class="ui celled table">
            <thead>
              <tr>
              <th  *ngFor="let data of softwarelicenses">{{data.label}}</th>
              
            </tr></thead>
            <tbody>
              <tr *ngFor="let data of softwarelicenses;let i=index">
                  <td *ngFor="let content of newsoftwarelicenseobject[i];let j=last">
                      <span *ngIf="!j">{{content}}</span>
                      <span *ngIf="j"><a href="{{content}}" target="_blank">{{content}}</a></span>    
                    </td>
              </tr>
            </tbody>
          </table>
      </div>
      <div class="actions">
        <button class="ui btn btn-lightgrey" (click)="modal.deny('denied')">Close</button>
      </div>
    </ng-template>